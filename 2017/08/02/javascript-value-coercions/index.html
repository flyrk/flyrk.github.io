<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="专注技术，热爱生活"><title>javascript类型转换 | 凡客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'bb7e7db9c784cc490f9bdad636d70e11';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">javascript类型转换</h1><a id="logo" href="/.">凡客</a><p class="description">Flyrk's Blog</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">javascript类型转换</h1><div class="post-meta">Aug 2, 2017<span> | </span><span class="category"><a href="/categories/JavaScript/">JavaScript</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 8</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><p>JavaScript中有七种类型，它们互相之间可以转换，但要搞清楚其中的转换关系可不简单。<br><a id="more"></a></p>
<h1 id="JavaScript类型"><a href="#JavaScript类型" class="headerlink" title="JavaScript类型"></a>JavaScript类型</h1><p>在JS中，有6种基本类型和一种引用类型，分别是：</p>
<ul>
<li>基本类型：<ul>
<li>null</li>
<li>undefined</li>
<li>boolean</li>
<li>number</li>
<li>string</li>
<li>symbol(ES6新增)</li>
</ul>
</li>
<li>引用类型：object</li>
</ul>
<p>一般来说，我们可以用<code>typeof</code>来检测某个值的数据类型，比如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>     === <span class="string">"undefined"</span>; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>          === <span class="string">"boolean"</span>;   <span class="comment">// true</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">24</span>            === <span class="string">"number"</span>;    <span class="comment">// true</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">"24"</span>          === <span class="string">"string"</span>;    <span class="comment">// true</span></span><br><span class="line"><span class="keyword">typeof</span> &#123; <span class="attr">age</span>: <span class="number">24</span> &#125;  === <span class="string">"object"</span>;    <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// added in ES6!</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>()      === <span class="string">"symbol"</span>;    <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>但是有一个例外: null,这也是一个bug<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span> === <span class="string">"object"</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>如果想检测某个值是否是null，则可以这样：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="literal">null</span>;</span><br><span class="line">(!a &amp;&amp; <span class="keyword">typeof</span> a === <span class="string">"object"</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>需要注意的是，function和array其实也是object，但它们有所区别：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123; <span class="comment">/* .. */</span> &#125; === <span class="string">"function"</span>; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">typeof</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] === <span class="string">"object"</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>如果要检测a是否是数组，可以用<code>instanceof</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">123</span>];</span><br><span class="line">a <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h1 id="类型转换抽象操作"><a href="#类型转换抽象操作" class="headerlink" title="类型转换抽象操作"></a>类型转换抽象操作</h1><h2 id="ToString"><a href="#ToString" class="headerlink" title="ToString"></a>ToString</h2><p>当一个非String类型的值要转换为String，我们可以用ToString操作。</p>
<h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h3><p>对于基本类型来说，它们有自然的转换关系。如：<code>null</code>变成<code>&quot;null&quot;</code>,<code>undefined</code>变成<code>&quot;undefined&quot;</code>,<code>true</code>变成<code>&quot;true&quot;</code>,<code>number</code>自然转换为数字字符串，但如果对于非常大的数，则会转换为指数形式。</p>
<p>对于<code>object</code>来说，<code>toString()</code>(代表着<code>Object.prototype.toString()</code>)将会返回<code>[[class]]</code>原型，比如说<code>&quot;object Object&quot;</code>;但如果是数组，则重写了<code>toString()</code>方法，会返回一个以逗号分隔数组值的字符串。比如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">a.toString(); <span class="comment">// "1,2,3"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify()"></a>JSON.stringify()</h3><p>另一种转换为字符串的方法就是<code>JSON.stringify</code>，对大多数基本类型，它的转换方法和<code>toString</code>是一样的：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify( <span class="number">42</span> );	<span class="comment">// "42"</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify( <span class="string">"42"</span> );	<span class="comment">// ""42"" (外面多加一层引号)</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify( <span class="literal">null</span> );	<span class="comment">// "null"</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify( <span class="literal">true</span> );	<span class="comment">// "true"</span></span><br></pre></td></tr></table></figure></p>
<p>但不同的是，<code>JSON.stringify</code>会忽略掉<code>undefined</code>、<code>function</code>和<code>symbol</code>。请看下面的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify( <span class="literal">undefined</span> );	<span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify( <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125; );	<span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify( [<span class="number">1</span>,<span class="literal">undefined</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,<span class="number">4</span>] );	<span class="comment">// "[1,null,null,4]"</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify( &#123; <span class="attr">a</span>:<span class="number">2</span>, <span class="attr">b</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125; &#125; );	<span class="comment">// "&#123;"a":2&#125;"</span></span><br></pre></td></tr></table></figure></p>
<p>如果<code>JSON.stringify</code>调用了循环引用的<code>object</code>，则会抛出Error。如果<code>JSON.stringify</code>调用的对象有<code>toJSON()</code>方法，则会对<code>toJSON()</code>的返回值再进行stringify。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  b: <span class="number">111</span></span><br><span class="line">&#125;;</span><br><span class="line">a.toJSON = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> &#123; <span class="attr">b</span>: <span class="keyword">this</span>.b &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify( a ); <span class="comment">// "&#123;"b":111&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = &#123;</span><br><span class="line">	val: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line"></span><br><span class="line">	toJSON: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.val.slice( <span class="number">1</span> );</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">JSON</span>.stringify( c ); <span class="comment">// "[2,3]"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ToNumber"><a href="#ToNumber" class="headerlink" title="ToNumber"></a>ToNumber</h2><p>转换为number，我们可以用ToNumber操作。</p>
<h3 id="Number"><a href="#Number" class="headerlink" title="Number()"></a>Number()</h3><p>对于基本类型，转换规则为：<code>true -&gt; 1</code>,<code>false -&gt; 0</code>,<code>undefined -&gt; NaN</code>,<code>null -&gt; 0</code>，字符串如果包含字母则转换为<code>NaN</code>。</p>
<p>对于将某值转换为基本数据类型，通常会调用<code>ToPrimitive</code>操作，首先看该值有没有<code>valueof()</code>方法，如果没有则调用<code>toString()</code>方法，如果二者都没有，则抛出<code>TypeError</code>。</p>
<p>比如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">	valueOf: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"12"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = &#123;</span><br><span class="line">	toString: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"12"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = [<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line">c.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.join( <span class="string">""</span> );	<span class="comment">// "12"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>( a );			<span class="comment">// 12</span></span><br><span class="line"><span class="built_in">Number</span>( b );			<span class="comment">// 12</span></span><br><span class="line"><span class="built_in">Number</span>( c );			<span class="comment">// 12</span></span><br><span class="line"><span class="built_in">Number</span>( <span class="string">""</span> );			<span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>( [] );			<span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>( [ <span class="string">"abc"</span> ] );	<span class="comment">// NaN</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ToBoolean"><a href="#ToBoolean" class="headerlink" title="ToBoolean"></a>ToBoolean</h2><p>将一个值转换为Boolean值，我们先看一个false表：</p>
<ul>
<li>undefined</li>
<li>null</li>
<li>false</li>
<li>+0, -0, and NaN</li>
<li>“”</li>
</ul>
<p>任何不在这个表上的值都为<code>true</code>。<br>比如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Boolean</span>( <span class="literal">false</span> );</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Number</span>( <span class="number">0</span> );</span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> <span class="built_in">String</span>( <span class="string">""</span> );</span><br><span class="line"><span class="built_in">Boolean</span>( a &amp;&amp; b &amp;&amp; c );  <span class="comment">// true</span></span><br><span class="line"><span class="comment">/***************/</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">"false"</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">"0"</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="string">"''"</span>;</span><br><span class="line"><span class="built_in">Boolean</span>( a &amp;&amp; b &amp;&amp; c );  <span class="comment">// true</span></span><br><span class="line"><span class="comment">/***************/</span></span><br><span class="line"><span class="keyword">var</span> a = [];		</span><br><span class="line"><span class="keyword">var</span> b = &#123;&#125;;			</span><br><span class="line"><span class="keyword">var</span> c = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="built_in">Boolean</span>( a &amp;&amp; b &amp;&amp; c );  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h1 id="显式转换"><a href="#显式转换" class="headerlink" title="显式转换"></a>显式转换</h1><p>之前提到过一些显式转换，但其实还有以下几种：</p>
<h2 id="字符串与数字的转换"><a href="#字符串与数字的转换" class="headerlink" title="字符串与数字的转换"></a>字符串与数字的转换</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">var</span> b = a.toString();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = <span class="string">"3.14"</span>;</span><br><span class="line"><span class="keyword">var</span> d = +c;</span><br><span class="line"></span><br><span class="line">b; <span class="comment">// "42"</span></span><br><span class="line">d; <span class="comment">// 3.14</span></span><br></pre></td></tr></table></figure>
<h2 id="日期转换为数字"><a href="#日期转换为数字" class="headerlink" title="日期转换为数字"></a>日期转换为数字</h2><p>Date转换为的数字为从1 January 1970 00:00:00 UTC 到Date的毫秒数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>( <span class="string">"Wed, 2 Aug 2017 08:53:06 CDT"</span> );</span><br><span class="line"></span><br><span class="line">+d; <span class="comment">// 1501681986000</span></span><br></pre></td></tr></table></figure></p>
<p><code>Date.now()</code>方法就是用的这种转换：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">Date</span>.now) &#123;</span><br><span class="line">	<span class="built_in">Date</span>.now = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> +<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="操作符"><a href="#操作符" class="headerlink" title="~操作符"></a><code>~</code>操作符</h2><p>Js里有<code>~</code>操作符，它首先将值转换为32bit的数字，然后在对它进行取补码，也就是说，<code>~x</code>相当于<code>-(x+1)</code>。</p>
<p>于是，<code>~</code>有一个用处就是判断<code>-1</code>，比如我们对字符串使用<code>indexOf()</code>时如果找不到则返回<code>-1</code>，我们可以这样写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"Hello World"</span>;</span><br><span class="line"></span><br><span class="line">~a.indexOf( <span class="string">"lo"</span> );			<span class="comment">// -4   &lt;-- truthy!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (~a.indexOf( <span class="string">"lo"</span> )) &#123;	<span class="comment">// true</span></span><br><span class="line">  <span class="comment">// 找到了</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~a.indexOf( <span class="string">"ol"</span> );			<span class="comment">// 0    &lt;-- falsy!</span></span><br><span class="line">!~a.indexOf( <span class="string">"ol"</span> );		<span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!~a.indexOf( <span class="string">"ol"</span> )) &#123;	<span class="comment">// true</span></span><br><span class="line">	<span class="comment">// 没有找到</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>除此之外，<code>~~</code>可以用来对小数进行取整，但要注意的是，它是舍弃小数位数，而不是四舍五入，相当于<code>Math.ceil()</code>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.floor( <span class="number">-49.6</span> );	<span class="comment">// -50</span></span><br><span class="line"><span class="built_in">Math</span>.ceil(<span class="number">-49.6</span>);  <span class="comment">// -49</span></span><br><span class="line">~~<span class="number">-49.6</span>;				<span class="comment">// -49</span></span><br></pre></td></tr></table></figure></p>
<h2 id="parseInt-方法"><a href="#parseInt-方法" class="headerlink" title="parseInt()方法"></a><code>parseInt()</code>方法</h2><p>该方法可以将字符串转换为数字，而且可以接受第二个参数，表示要转换的进制。但要注意的是，它有几个特别的地方：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>( <span class="number">0.000008</span> );		<span class="comment">// 0   ("0" from "0.000008")</span></span><br><span class="line"><span class="built_in">parseInt</span>( <span class="number">0.0000008</span> );		<span class="comment">// 8   ("8" from "8e-7")</span></span><br><span class="line"><span class="built_in">parseInt</span>( <span class="literal">false</span>, <span class="number">16</span> );		<span class="comment">// 250 ("fa" from "false")</span></span><br><span class="line"><span class="built_in">parseInt</span>( <span class="built_in">parseInt</span>, <span class="number">16</span> );	<span class="comment">// 15  ("f" from "function..")</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">parseInt</span>( <span class="string">"0x10"</span> );			<span class="comment">// 16</span></span><br><span class="line"><span class="built_in">parseInt</span>( <span class="string">"103"</span>, <span class="number">2</span> );		<span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p>
<p>所以，要谨慎使用<code>parseInt</code>。</p>
<h2 id="转换为Boolean"><a href="#转换为Boolean" class="headerlink" title="转换为Boolean"></a>转换为Boolean</h2><p>我们已经知道<code>Boolean()</code>方法可以将值转换为<code>Boolean</code>，但还有一个更快的方法，就是使用<code>!!</code>操作符：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"0"</span>;</span><br><span class="line"><span class="keyword">var</span> b = [];</span><br><span class="line"><span class="keyword">var</span> c = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">var</span> e = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> f = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> g;</span><br><span class="line"></span><br><span class="line">!!a;	<span class="comment">// true</span></span><br><span class="line">!!b;	<span class="comment">// true</span></span><br><span class="line">!!c;	<span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">!!d;	<span class="comment">// false</span></span><br><span class="line">!!e;	<span class="comment">// false</span></span><br><span class="line">!!f;	<span class="comment">// false</span></span><br><span class="line">!!g;	<span class="comment">// false</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h1><h2 id="数字转换为字符串"><a href="#数字转换为字符串" class="headerlink" title="数字转换为字符串"></a>数字转换为字符串</h2><p>因为字符串可以用<code>+</code>连接，所以当我们把数字和字符串用<code>+</code>连接时，数字会强制转换为字符串：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">122</span>;</span><br><span class="line"><span class="keyword">var</span> b = a + <span class="string">''</span>;  </span><br><span class="line">b;  <span class="comment">// "122"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="字符串转换为数字"><a href="#字符串转换为数字" class="headerlink" title="字符串转换为数字"></a>字符串转换为数字</h2><p>因为<code>-</code>只在数字运算符中才有定义，所以对字符串使用<code>-</code>会被强制转换为数字：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"122"</span>;</span><br><span class="line"><span class="keyword">var</span> b = a - <span class="number">0</span>;  </span><br><span class="line">b;  <span class="comment">// 122</span></span><br></pre></td></tr></table></figure></p>
<h2 id="数组转换为数字"><a href="#数组转换为数字" class="headerlink" title="数组转换为数字"></a>数组转换为数字</h2><p>同样的，如果数组中只有一个值，使用<code>-</code>时，会先把数组转换为字符串，再转换为数字：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">1</span>];</span><br><span class="line">a - b; <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p>
<h1 id="操作符-和-amp-amp-的妙用"><a href="#操作符-和-amp-amp-的妙用" class="headerlink" title="操作符||和&amp;&amp;的妙用"></a>操作符<code>||</code>和<code>&amp;&amp;</code>的妙用</h1><p>我们都知道<code>||</code>代表‘或’，<code>&amp;&amp;</code>代表‘和’，但是与Java、C++等语言不同的是，使用这两个操作符时，它们返回的不是true或false，而是本身的值，举个例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">a || b;		<span class="comment">// 42</span></span><br><span class="line">a &amp;&amp; b;		<span class="comment">// "abc"</span></span><br><span class="line"></span><br><span class="line">c || b;		<span class="comment">// "abc"</span></span><br><span class="line">c &amp;&amp; b;		<span class="comment">// null</span></span><br></pre></td></tr></table></figure></p>
<p>于是我们就可以利用这两个操作符进行一些赋值操作：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a || b;</span><br><span class="line"><span class="comment">// 等价于：</span></span><br><span class="line">a ? a : b;</span><br><span class="line"></span><br><span class="line">a &amp;&amp; b;</span><br><span class="line"><span class="comment">// 等价于：</span></span><br><span class="line">a ? b : a;</span><br></pre></td></tr></table></figure></p>
<h1 id="与-的运用"><a href="#与-的运用" class="headerlink" title="==与===的运用"></a><code>==</code>与<code>===</code>的运用</h1><p>这两个符号我们应该很熟悉了，<code>==</code>代表值的比较，如果二者类型不同，会进行强制转换；<code>===</code>则是二者值与类型都相同才为true。这里需要注意一些问题：</p>
<ul>
<li><code>NaN</code>不等于它本身</li>
<li><code>+0</code>等于<code>-0</code></li>
</ul>
<h2 id="字符串与数字比较"><a href="#字符串与数字比较" class="headerlink" title="字符串与数字比较"></a>字符串与数字比较</h2><p>二者比较时，使用<code>===</code>结果肯定为false，因为二者类型不同，但如果使用<code>==</code>，则需要进行转换，简单来说就是把字符串转换为数字再对二者的值进行比较：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">22</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">"22"</span>;</span><br><span class="line"></span><br><span class="line">a === b;	<span class="comment">// false</span></span><br><span class="line">a == b;		<span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="任何值与Boolean比较"><a href="#任何值与Boolean比较" class="headerlink" title="任何值与Boolean比较"></a>任何值与Boolean比较</h2><p>当任何值与<code>Boolean</code>使用<code>==</code>比较时，首先会把<code>Boolean</code>转换为数字，然后再进行比较。也就是说：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="string">"42"</span>;</span><br><span class="line"></span><br><span class="line">x == y; <span class="comment">// false</span></span><br></pre></td></tr></table></figure></p>
<p>所以，在任何时候，都不要使用<code>== true</code>或者<code>== false</code>这样的语句。</p>
<h2 id="null与undefined比较"><a href="#null与undefined比较" class="headerlink" title="null与undefined比较"></a><code>null</code>与<code>undefined</code>比较</h2><p>当使用<code>==</code>比较<code>null</code>和<code>undefined</code>时，结果总为true。</p>
<h2 id="Object与非Object比较"><a href="#Object与非Object比较" class="headerlink" title="Object与非Object比较"></a><code>Object</code>与非<code>Object</code>比较</h2><p>当<code>object</code>/<code>function</code>/<code>array</code>与<code>String</code>或者<code>Number</code>进行<code>==</code>比较时，会先把<code>Object</code>转换为<code>String</code>或<code>Number</code>，然后再对值进行比较，而<code>Boolean</code>值会被转换为<code>Number</code>再进行比较。</p>
<h3 id="一些值得注意的比较"><a href="#一些值得注意的比较" class="headerlink" title="一些值得注意的比较"></a>一些值得注意的比较</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""</span> == [<span class="literal">null</span>];	<span class="comment">// true</span></span><br><span class="line">[] == ![]; <span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> == <span class="string">"\n"</span>; <span class="comment">// true</span></span><br><span class="line"><span class="string">"0"</span> == <span class="literal">false</span>;	<span class="comment">// true</span></span><br><span class="line"><span class="literal">false</span> == <span class="number">0</span>;		<span class="comment">// true</span></span><br><span class="line"><span class="literal">false</span> == <span class="string">""</span>;	<span class="comment">// true</span></span><br><span class="line"><span class="literal">false</span> == [];	<span class="comment">// true</span></span><br><span class="line"><span class="string">""</span> == <span class="number">0</span>;		<span class="comment">// true</span></span><br><span class="line"><span class="string">""</span> == [];		<span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> == [];		<span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>需要特别注意的就是隐式转换，将对象转换为基本类型时，会先调用<code>valueOf()</code>方法，没有才调用<code>toString()</code>方法，如果我们给自定义的对象添加<code>valueOf()</code>方法，并自己给返回值，也能能起到转换的效果。还有就是，在进行等于比较时，还是用<code>===</code>比较安全。</p>
<hr>
<blockquote>
<p>参考资料：<a href="https://github.com/getify/You-Dont-Know-JS/blob/master/types%20%26%20grammar/ch4.md">You-Dont-Know-JS</a></p>
</blockquote>
</div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>flyrk</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2017/08/02/javascript-value-coercions/">https://xmflyrk.com/2017/08/02/javascript-value-coercions/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0 CN</a> 许可协议。转载请注明出处！</li></ul></div><br><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="https://xmflyrk.com/2017/08/02/javascript-value-coercions/" data-id="cjzh0fxj0004okffjdjwo76xe" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLklEQVR42u3awY6DMAxF0f7/TzPbbpLeZ8NIOJdVVQXwYWHFsT8ffF1f1+qf1Xp+7/6ZN1wyZMh4LePaXqs1/MkkUP7eZQwyZMg4gLEPgjyarNyv2b/3R8wyZMiQAZLsfg1KmjJkyJBxKyPdUHZKZRkyZMjgAZGCdv/Pha8Ha3EZMmS8kJEenP3n70f6GzJkyHgV4wovfhdpA5DmKHqXDBkyRjPSo7T00L/TbEjjkSFDxgmM2qYtTb4cw1sOMmTImM1o6UtB1AY7fhzkyZAhYzQjLSM7r+ejGOldMmTIOIGx3+rdew6fjpHVIpQhQ8YkRjpaURuAIAGRIjloYcqQIWMQo1Nk8q3ec82AZX9DhgwZQxkk2dUOwni4PGWjFqYMGTJGMEhLsnYARz4NWYmeLEOGjNGM/gH9E8MWPOHKkCHjHAYfkqi1Ifnn4PHERawMGTJeyyClZj+4tIgtTovIkCFjKKP2Mj4qwVsCfEu6jFCGDBmjGemB/l2vTIctSLkrQ4aMqYzaoX+aBGuDF/E+V4YMGaMZ6QYubQPUWgtxY0CGDBnHMEhKTZNyXIim98qQIWMoo5ZMawUqbwOk4xoyZMiYzehn67s2iHyrypsTMmTImMToFKX8WL/2yYJ7ZciQcQCDJz4eNE++PNzlShkyZMjAR3K147naKIYMGTJk8ITbGbbofKDlsIUMGTKGMkgRy5NmbXiiNqIhQ4aMExj3nmV12paE1GpkypAh432MPy0hQc8UJ9YvAAAAAElFTkSuQmCC">分享</a><div class="tags"><a href="/tags/JS基础/">JS基础</a></div><div class="post-nav"><a class="pre" href="/2017/08/04/react-setState-update/">React中如何更新state</a><a class="next" href="/2017/07/27/css-margin-collapse/">CSS外边距合并效应</a></div><iframe src="/donate/?AliPayQR=/images/AliPayQR.png&amp;WeChatQR=/images/WeChanSQ.png&amp;GitHub=https://github.com/flyrk/donate-page&amp;BTCQR=null&amp;BTCKEY=null&amp;PayPal=null" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=0.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=0.0.0"></script><script>var gitalk = new Gitalk({
  clientID: '083efbbbdb04471e0599',
  clientSecret: 'fcb0584c1228acd4317926b1f427051bc6b9f03c',
  repo: 'blog-comment',
  owner: 'flyrk',
  admin: ['flyrk'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://xmflyrk.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web网络/">Web网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端性能优化/">前端性能优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/框架学习/">框架学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活杂谈/">生活杂谈</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法与数据结构/">算法与数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/面经/">面经</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/VSCode/" style="font-size: 15px;">VSCode</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/跨域/" style="font-size: 15px;">跨域</a> <a href="/tags/JS对象及函数/" style="font-size: 15px;">JS对象及函数</a> <a href="/tags/缓存/" style="font-size: 15px;">缓存</a> <a href="/tags/实习面试/" style="font-size: 15px;">实习面试</a> <a href="/tags/CSS技巧/" style="font-size: 15px;">CSS技巧</a> <a href="/tags/thoughts/" style="font-size: 15px;">thoughts</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/JS实战/" style="font-size: 15px;">JS实战</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/Cookies/" style="font-size: 15px;">Cookies</a> <a href="/tags/编辑器/" style="font-size: 15px;">编辑器</a> <a href="/tags/CSS动画/" style="font-size: 15px;">CSS动画</a> <a href="/tags/NodeJS/" style="font-size: 15px;">NodeJS</a> <a href="/tags/思考/" style="font-size: 15px;">思考</a> <a href="/tags/经历/" style="font-size: 15px;">经历</a> <a href="/tags/React/" style="font-size: 15px;">React</a> <a href="/tags/JS基础/" style="font-size: 15px;">JS基础</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/08/18/how-to-find-a-programmer-job/">我是如何当上程序员的（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/11/half-year-summary/">写作能带给我什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/27/leetcode-sum-of-even-numbers-after-queries-solution/">有意思的leetcode算法题——巧用数学知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/15/fast-achieve-tabpane-effect/">快速实现标签条切换效果</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/29/nodeJS-file-system-operation/">NodeJS常用的一些文件操作技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/23/how-to-achieve-typewriter-effect/">如何实现文字输入效果</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/12/use-anchor-jump-to-anywhere-in-page/">如何实现页面不同内容之间的跳转</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/09/2018-road-to-grow-up/">迟来的2018总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/20/codemirror-markdown-editor-chapter2/">实现基于codemirror的markdown编辑器(二)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/15/codemirror-markdown-editor-chapter1/">实现基于codemirror的markdown编辑器(一)</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">凡客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" color="0,0,0" opacity="0.5" zindex="-2" count="50" src="//lib.baomitu.com/canvas-nest.js/2.0.3/canvas-nest.umd.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>